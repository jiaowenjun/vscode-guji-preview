{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Guji",
  "scopeName": "source.guji",
  "patterns": [
    {
      "include": "#block"
    }
  ],
  "repository": {
    "block": {
      "patterns": [
        {
          "include": "#comment"
        },
        {
          "include": "#punctuation"
        },
        {
          "include": "#page-decl"
        },
        {
          "include": "#large-line"
        },
        {
          "include": "#book"
        },
        {
          "include": "#large-circle-letter"
        },
        {
          "include": "#large-letter"
        },
        {
          "include": "#space"
        }
      ]
    },
    "comment": {
      "match": "//.*",
      "name": "comment.guji"
    },
    "punctuation": {
      "match": "，|。|·|：",
      "name": "comment.punctuation.guji"
    },
    "page-decl": {
      "match": "^\\s*@\\d+\\s*$",
      "name": "comment.page-decl.guji"
    },
    "large-line": {
      "match": "^\\s*#+ [^#【】]+\\s*$",
      "name": "markup.heading.large-line.guji"
    },
    "large-circle-letter": {
      "match": "#\\([^#【】(]",
      "name": "markup.heading.large-circle-letter.guji"
    },
    "large-letter": {
      "match": "#[^#【】(]",
      "name": "markup.heading.large-letter.guji"
    },
    "space": {
      "match": "\\*|　",
      "name": "markup.inline.raw.space.guji"
    },
    "book": {
      "match": "(【)(.*?)(】)|(【)([^】]*?)$|^([^【]*?)(】)",
      "captures": {
        "1": { "name": "punctuation.paren.open.book.guji" },
        "2": { "name": "markup.underline.book.guji" },
        "3": { "name": "punctuation.paren.close.book.guji" },
        "4": { "name": "punctuation.paren.open.book.guji" },
        "5": { "name": "markup.underline.book.guji" },
        "6": { "name": "markup.underline.book.guji" },
        "7": { "name": "punctuation.paren.close.book.guji" }
      }
    }
  }
}
